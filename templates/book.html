{% extends "layout.html" %}

{% block heading %}
{% endblock %}

{% block body1 %}

{% if reviewed != "reviewed" %}

</br>
<form method ="POST">
        <div class="form-group">
                <label for="exampleFormControlTextarea1">Write your review</label>
                <textarea class="form-control" name=review id="exampleFormControlTextarea1" rows="12"></textarea>
              </div>
       
            </br>
            <label for="exampleFormControlTextarea1">Choose your rating</label>

        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" checked="" name="rating" id="inlineRadio2" type = "number" value=1>
            <label class="form-check-label" for="inlineRadio2">1</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="rating" id="inlineRadio2" type = "number" value=2>
                <label class="form-check-label" for="inlineRadio2">2</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" checked="" name="rating" id="inlineRadio2" type = "number" value=3>
                <label class="form-check-label btn-default" for="inlineRadio2">3</label>
            </div>
            <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="rating" id="inlineRadio2" type = "number" value=4>
                    <label class="form-check-label" for="inlineRadio2">4</label>
            </div>
            <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="rating" id="inlineRadio2" type = "number" value=5>
                    <label class="form-check-label" for="inlineRadio2">5</label>
            </div>
            </br>
            </br>
    <input type="submit" name="status" value="Submit" class="btn btn-dark"> 
      </form>

      {% elif reviewed == 'reviewed' %}
      <br/>
      <h5>You already reviewed this book, thank you for your contribution !</h5>
      {% endif %}

{% endblock %}


{% block body2 %}

</br>
<h2>{{session['book'].title}}</h2>
<h5>{{session['book'].author}}, {{session['book'].year}} </h5>
<h6>Average rating {{avgRating}} from {{nbrRatings}} reviewers</h6>

<h6>ISBN {{session['book'].isbn}} </h6>

<table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">rating</th>
            <th scope="col">user</th>
            <th scope="col">review</th>
          </tr>
        </thead>

        <tbody>
                {% for review in reviews %}
                <tr>
                        {% if review.rating == 1 %}
                        <td>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star"></span>
                        <span class="fa fa-star"></span>
                        <span class="fa fa-star"></span>
                        <span class="fa fa-star"></span>    
                        </td>       
                        {% elif review.rating == 2 %}
                        <td>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star"></span>
                        <span class="fa fa-star"></span>
                        <span class="fa fa-star"></span>     
                        </td>  
                        {% elif review.rating == 3 %}
                        <td>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star"></span>
                        <span class="fa fa-star"></span>
                        </td>  
                        {% elif review.rating == 4 %}
                        <td>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star"></span>           
                        </td>  
                        {% elif review.rating == 5 %}
                        <td>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        </td>  
                        {% endif %}
                    <td>{{review.username}}</td>
                    <td>{{review.review}}</td>
                </tr>
                {% endfor %}
        </tbody>
      </table>


{% endblock %}
